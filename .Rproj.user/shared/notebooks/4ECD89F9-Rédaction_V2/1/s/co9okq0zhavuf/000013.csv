"0",""
"0","# Calculer le nombre d'individus par quadrat"
"0","nb_indiv_quadrat <- data_original_obs %>% "
"0","    mutate(id_quadrat_fin = paste(ID_quadrat, session, sep = ""."")) %>% "
"0","  group_by(id_quadrat_fin) %>% "
"0","  summarise("
"0","    nb_individus = n_distinct(ID_ind),"
"0","    .groups = ""drop"""
"0","  )"
"0",""
"0","# Comparaison du nombre d'individus par quadrat au nombre observé par mes observateurs"
"0","difference_ind <- verification_obs_quadrat %>% "
"0","  full_join(nb_indiv_quadrat, by = ""id_quadrat_fin"")"
"0",""
"0","# Taux de detection par observateur"
"0","difference_ind <- difference_ind %>% "
"0","  mutate(detection = n/nb_individus)"
"0",""
"0","# Extraire les identifiants de tous les individus possibles"
"0","individus_par_quadrat <- tab_detection %>%"
"0","  distinct(id_quadrat_fin, ID_ind)"
"0",""
"0","# Combinaisons de tous les individus possibles avec les observateurs"
"0","grille_complete <- difference_ind %>%"
"0","  dplyr::select(id_quadrat_fin, observateur) %>%"
"0","  distinct() %>%"
"0","  left_join(individus_par_quadrat, by = ""id_quadrat_fin"", relationship = ""many-to-many"")"
"0",""
"0","# Ajouter les informations de detection dans la grille complete"
"0","tab_complet <- grille_complete %>%"
"0","  left_join("
"0","    tab_detection %>%"
"0","      mutate(detection = 1) %>%"
"0","      dplyr::select(id_quadrat_fin, observateur, ID_ind, detection),"
"0","    by = c(""id_quadrat_fin"", ""observateur"", ""ID_ind"")"
"0","  ) %>%"
"0","  mutate("
"0","    detection = ifelse(is.na(detection), 0, detection)"
"0","  )"
"0",""
"0","# Vérifier que cela a fonctionné en comparant le nombre de détections calculées avec le nombre de détections par quadrat"
"0",""
"0","tab_complet %>%"
"0","  group_by(id_quadrat_fin, observateur) %>%"
"0","  summarise("
"0","    n_detectes = sum(detection),"
"0","    .groups = ""drop"""
"0","  ) %>%"
"0","  left_join(difference_ind, by = c(""id_quadrat_fin"", ""observateur"")) %>% "
"0","  filter(n_detectes != n)"
